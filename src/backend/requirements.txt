# PyTorch with CUDA 11.8 support (install FIRST before other dependencies)
# Using extra index URL for CUDA wheels - avoids pulling in torchaudio
--extra-index-url https://download.pytorch.org/whl/cu118
torch>=2.0.0,<2.3.0
torchvision>=0.15.0,<0.18.0

# Core Framework
fastapi==0.108.0          # Modern Python web framework
uvicorn[standard]==0.25.0 # ASGI server with hot reload
python-multipart==0.0.6   # File upload support
pydantic==2.5.0           # Data validation

# Video Processing Dependencies
ffmpeg-python==0.2.0      # FFmpeg Python bindings
aiofiles==23.2.1          # Async file operations

# AI Upscaling Dependencies
# Version compatibility is critical: numpy 1.x is required by PyTorch/Real-ESRGAN
numpy>=1.24.0,<2.0.0      # Numerical computing (MUST be 1.x for PyTorch compatibility)
opencv-python>=4.8.0,<4.10.0  # OpenCV (pinned to 4.8-4.9 for numpy 1.x compatibility)
pillow>=10.0.0            # Image processing library
# Real-ESRGAN dependencies
# Use PyPI versions for stability (git versions may have breaking changes)
facexlib>=0.3.0           # Face detection and restoration (required by realesrgan)
gfpgan>=1.3.8             # GAN for face restoration (required by realesrgan)
basicsr>=1.4.2            # BasicSR image/video restoration toolbox
realesrgan>=0.3.0         # Real-ESRGAN AI upscaling
wget>=3.2                 # Download model weights
